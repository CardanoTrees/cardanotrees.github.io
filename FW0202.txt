<script>function FWrndNum(num){return Math.random()*num+1}function FWvector(x,y){this.x=x;this.y=y;this.add=function(vec2){this.x=this.x+vec2.x;this.y=this.y+vec2.y}}function FWparticle(pos,vel){this.pos=new FWvector(pos.x,pos.y);this.vel=vel;this.dead=false;this.start=0;this.FWupdate=function(time){let timeSpan=time-this.start;if(timeSpan>500){this.dead=true}if(!this.dead){this.pos.add(this.vel);this.vel.y=this.vel.y+gravity}};this.FW0202D1=function(){if(!this.dead){FWdrawDot(this.pos.x,this.pos.y,2)}}}function firework(x,y){this.pos=new FWvector(x,y);this.vel=new FWvector(0,-FWrndNum(15)-3);this.color="hsl("+FWrndNum(360)+", 100%, 50%)";this.size=4;this.dead=false;this.start=0;let exParticles=[];exPLen=100;let rootShow=true;this.FWupdate=function(time){if(this.dead){return}rootShow=this.vel.y<0;if(rootShow){this.pos.add(this.vel);this.vel.y=this.vel.y+gravity}else{if(exParticles.length===0){flash=true;auxR=Math.random()+1;for(let i=0;i<exPLen;i++){exParticles.push(new FWparticle(this.pos,new FWvector((-FWrndNum(10)+5)*auxR,(-FWrndNum(10)+5)*auxR)));exParticles[exParticles.length-1].start=time}}let numOfDead=0;for(let i=0;i<exPLen;i++){let p=exParticles[i];p.FWupdate(time);if(p.dead){numOfDead++}}if(numOfDead===exPLen){this.dead=true}}};this.FW0202D1=function(){if(this.dead){return}FW0202ctx1.fillStyle=this.color;if(rootShow){FWdrawDot(this.pos.x+Math.random()*10,this.pos.y,this.size)}else{for(let i=0;i<exPLen;i++){let p=exParticles[i];p.FW0202D1()}}}}function FWdrawDot(x,y,size){FW0202ctx1.beginPath();FW0202ctx1.arc(x,y,size,0,Math.PI*2);FW0202ctx1.fill();FW0202ctx1.closePath()}var fireworks=[],gravity=.2,snapTime=50,flash=false;function FW0202I1(m1,d1,h1,mm1,mmt,UTC,Ref,Wi,Wf){let numOfFireworks=10;if(Ref=="L"){UTC=(new Date).getTimezoneOffset()/-60}WIDTHi=Wi*window.innerWidth;WIDTHf=Wf*window.innerWidth;Wpi=Wi;Wpf=Wf;for(let i=0;i<numOfFireworks;i++){fireworks.push(new firework(FWrndNum(WIDTHf-WIDTHi)+WIDTHi,HEIGHT))}let a1=2018;fin=0;while(Date.now()>fin){inic=Date.UTC(a1,m1-1,d1,h1,mm1)-UTC*60*60*1e3;fin=inic+mmt*6e4;a1+=1;console.log(UTC)}}function FWupdate(time){for(let i=0,len=fireworks.length;i<len;i++){let p=fireworks[i];p.FWupdate(time)}}function FW0202D1(time){if(Date.now()>inic&&Date.now()<fin){FWupdate(time);FW0202ctx1.clearRect(0,0,WIDTH,HEIGHT);WIDTHi=Wpi*window.innerWidth;WIDTHf=Wpf*window.innerWidth;if(flash){flash=false}FW0202ctx1.fillStyle="blue";for(let i=0,len=fireworks.length;i<len;i++){let p=fireworks[i];if(p.dead){fireworks[i]=new firework(FWrndNum(WIDTHf-WIDTHi)+WIDTHi,HEIGHT);p=fireworks[i];p.start=time}p.FW0202D1()}window.requestAnimationFrame(FW0202D1)}else{FW0202ctx1.clearRect(0,0,WIDTH,HEIGHT)}}</script>
